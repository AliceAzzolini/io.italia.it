function formatNumberIntl(r){return(new Intl.NumberFormat).format(r)}function formatNumberSuffix(r){for(var t=[{divider:1e6,suffix:"M"},{divider:1e3,suffix:"k"}],a=0;a<t.length;a++){if(r>=t[a].divider)return formatNumberIntl(r/t[a].divider)+t[a].suffix}return r}function tooltipTitleCallbackXDate(r){return new Date(r[0].xLabel).toLocaleDateString()}function tooltipLabelCallbackYNumber(r,t){return t.datasets[r.datasetIndex].label+": "+formatNumberIntl(r.yLabel)}function tooltipLabelCallbackArcNumber(r,t){var a=t.labels[r.index],e=t.datasets[r.datasetIndex].data[r.index],o=t.datasets[0].data.reduce((r,t)=>r+t,0)||1,n=new Intl.NumberFormat({style:"percent",maximumFractionDigits:0}).format(100*e/o)+"%";return[a+": "+formatNumberIntl(e),n]}function generateDownloads(r){var t=[],a=[];downloadsFromJune=r.slice(65,r.length);for(let t=0;t<r.length;t++){var e=r[t];TOTAL+=e.$ae_first_open}for(let r=0;r<downloadsFromJune.length;r++){e=downloadsFromJune[r];const o=moment(e.date).format("YYYY-MM-DD");t.push(o.toString()),a.push(e.$ae_first_open)}return{labels:t,datasets:[{label:"# Downloads IO",data:a,borderWidth:2,backgroundColor:"rgb(0, 115, 230, 0.2)",borderColor:"rgb(0, 115, 230)",pointRadius:0,pointBorderColor:"rgb(0, 115, 230)",pointBackgroundColor:"rgb(0, 115, 230)",pointHitRadius:5}]}}function generateIdps(r){var t=[],a=[],e=[],o=[],n=[],d=[],i=[],l=[],u=[],s=[];for(let c=0;c<r.length;c++){var b=r[c];const f=moment(b.date).format("YYYY-MM-DD");t.push(f.toString()),a.push(b["Poste ID"]),e.push(b["Aruba ID"]),o.push(b["Namirial ID"]),n.push(b["Infocert ID"]),d.push(b["Intesa ID"]),i.push(b["Lepida ID"]),l.push(b["SPIDItalia Register.it"]),u.push(b["Sielte ID"]),s.push(b["Telecom Italia"])}return{labels:t,datasets:[{label:"Poste Italiane",data:a,borderWidth:0,backgroundColor:"#f8d515"},{label:"Aruba",data:e,borderWidth:0,backgroundColor:"green"},{label:"Namiral",data:o,borderWidth:0,backgroundColor:"#e9ab74"},{label:"Infocert",data:n,borderWidth:0,backgroundColor:"#3374a1"},{label:"Intesa",data:d,borderWidth:0,backgroundColor:"#afd724"},{label:"Lepida",data:i,borderWidth:0,backgroundColor:"#e4771f"},{label:"Register.it",data:l,borderWidth:0,backgroundColor:"#f6ede6"},{label:"Sielte",data:u,borderWidth:0,backgroundColor:"#287c4a"},{label:"TIM",data:s,borderWidth:0,backgroundColor:"#d90d2e"}]}}function generateCieIdps(r){var t=[],a=[],e=[];for(let n=0;n<r.length;n++){var o=r[n];const d=moment(o.date).format("YYYY-MM-DD");t.push(d.toString()),a.push(o["Poste ID"]+o["Aruba ID"]+o["Namirial ID"]+o["Infocert ID"]+o["Intesa ID"]+o["Lepida ID"]+o["SPIDItalia Register.it"]+o["Sielte ID"]+o["Telecom Italia"]),e.push(o.CIE)}return{labels:t,datasets:[{label:"SPID",data:a,borderWidth:0,backgroundColor:"#3374a1"},{label:"CIE",data:e,borderWidth:0,backgroundColor:"#15c5f8"}]}}function generateBonus(r){var t=[],a=[];for(let o=0;o<r.length;o++){var e=r[o];const n=moment(e.date).format("YYYY-MM-DD");t.push(n.toString()),a.push(e.total)}return{labels:t,datasets:[{label:"Bonus Vacanze",data:a,borderWidth:2,backgroundColor:"rgb(0, 115, 230, 0.2)",borderColor:"rgb(0, 115, 230)",pointHitRadius:5,pointRadius:0}]}}function generatePieOS(r){for(var t=[0,0],a=0;a<r.length;a++){var e=r[a];t[0]=t[0]+e.Android,t[1]=t[1]+e.iOS}return{labels:["Android","iOS"],datasets:[{data:t,backgroundColor:["rgb(0, 115, 230)","rgb(38, 200, 247)"],hoverBackgroundColor:["rgb(0, 90, 200)","rgb(10, 160, 220)"],hoverBorderColor:"#fff"}]}}function generateUserTrxThreshold(r,t,a){return{labels:["tra 1 e "+(a-1),a+" e pi\xf9"],datasets:[{data:[r,t],backgroundColor:["rgb(38, 200, 247)","#fff"],hoverBackgroundColor:["rgb(10, 160, 220)"],borderColor:"#06c",hoverBorderColor:"#06c"}]}}function generateAderenti(r,t){var a=[],e=[],o=[];for(let d=0;d<r.length;d++){var n=r[d];const i=moment(n.day).format("YYYY-MM-DD");a.push(i.toString()),e.push(n.total);const l=t.find(function(r){return r.day===n.day});o.push(l&&l.tot)}return{labels:a,datasets:[{label:"Utenti aderenti",data:e,backgroundColor:"rgb(0, 115, 230)",pointHitRadius:5,pointRadius:0},{label:"Strumenti di pagamento",data:o,backgroundColor:"#15c5f8",pointHitRadius:5,pointRadius:0}]}}function generateTrxDay(r){var t=[],a=[];for(let o=0;o<r.length;o++){var e=r[o];const n=moment(e.day).format("YYYY-MM-DD");t.push(n.toString()),a.push(e.count)}return{labels:t,datasets:[{label:"Numero transazioni",data:a,borderWidth:2,backgroundColor:"rgb(0, 115, 230, 0.2)",borderColor:"rgb(0, 115, 230)",pointHitRadius:5,pointRadius:0}]}}function generateTrxAmount(r){var t=["rgb(0, 115, 230)","#2d489d","#00264D"],a=r.slice();return{labels:a.map(function(r){return r.ran+"\u20ac"}),datasets:[{label:"Numero transazioni",data:a.map(function(r){return r.count}),backgroundColor:r.map(function(r){var a=r.bin_width||Infinity;return t[a<=5?0:a<=25?1:2]}),pointHitRadius:5,pointRadius:0}]}}function generateUserTrx(r,t){var a=r.filter(function(r){return r.bin<=150}),e=a.map(function(r,t){var e=a[t+1];return e?[r.bin||1,e.bin-1].join("-"):r.bin+"+"}),o=r.map(function(r){return r.bin>=t?"rgb(0, 115, 230)":"#15c5f8"});return{labels:e,datasets:[{label:"Numero utenti",data:a.map(function(r){return r.count}),backgroundColor:o,pointHitRadius:5,pointRadius:0}]}}var TOTAL=0,TOTALBONUS=0;