function loadJSON(e){var t=new XMLHttpRequest;t.overrideMimeType("application/json"),t.open("GET","https://pdnd-prod-dl-1-public-data.s3.eu-central-1.amazonaws.com/dashboard/pagopa/dashboard-io.json",!0),t.onreadystatechange=function(){4==t.readyState&&"200"==t.status&&e(t.responseText)},t.send(null)}var TRX_THRESHOLDS=[10,50],CASHBACK_PERIOD_CUR=2;$(function(){$('[data-toggle="tooltip"]').tooltip()}),loadJSON(function(e){function t(e){var t=e-1;$("#cashbackPeriodTabs").find(".nav-link").each(function(e,i){$(i).toggleClass("active",e===t)}),Object.keys(S).forEach(function(e){var i=S[e][t];null!=i&&$(e).text(i.toLocaleString("it"))}),L.forEach(function(e){var i=e[0],l=e[1],n=e[2][t];if(null!=n){var o=l.apply(null,n);i.data=o,i.update()}})}var i=JSON.parse(e),l=document.getElementById("totalPred")?document.getElementById("totalPred").getContext("2d"):undefined,n=generateDownloads(i.downloads),o=(l?new Chart(l,{type:"line",data:n,options:{elements:{rectangle:{borderWidth:2}},responsive:!0,legend:{display:!1},title:{display:!1,text:"Numero donwloads "},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined,generatePieOS(i.downloadsByOs)),a=document.getElementById("top10EdcPie")?document.getElementById("top10EdcPie").getContext("2d"):undefined,d=(a?new Chart(a,{type:"pie",data:o,options:{responsive:!0,legend:{position:"bottom",labels:{boxWidth:8,usePointStyle:!0,fontFamily:"'Titillium Web', Arial"}},tooltips:{callbacks:{label:tooltipLabelCallbackArcNumber}}}}):undefined,document.getElementById("idps")?document.getElementById("idps").getContext("2d"):undefined),s=generateIdps(i.idps.slice(65,i.idps.length)),r=(d?new Chart(d,{type:"bar",data:s,borderWidth:0,options:{elements:{rectangle:{borderWidth:0}},responsive:!0,title:{display:!1,text:"Login "},legend:{position:"bottom",labels:{boxWidth:8,usePointStyle:!0,fontFamily:"'Titillium Web', Arial"}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7}}],yAxes:[{stacked:!0,gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined,document.getElementById("cieidps")?document.getElementById("cieidps").getContext("2d"):undefined),c=generateCieIdps(i.idps.slice(65,i.idps.length)),m=(r?new Chart(r,{type:"bar",data:c,borderWidth:0,options:{elements:{rectangle:{borderWidth:0}},responsive:!0,title:{display:!1,text:"Login "},legend:{position:"bottom",labels:{boxWidth:8,usePointStyle:!0,fontFamily:"'Titillium Web', Arial"}},scales:{xAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7}}],yAxes:[{stacked:!0,gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined,document.getElementById("bonusLine")?document.getElementById("bonusLine").getContext("2d"):undefined),u=generateBonus(i.bonusActivation);m?new Chart(m,{type:"line",data:u,options:{elements:{rectangle:{borderWidth:2}},legend:{display:!1},responsive:!0,title:{display:!1,text:"Bonus Vacanze "},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined;$("#downloads").text(TOTAL.toLocaleString("it")),$("#bonusTotal").text(i.generatedBonusCount.toLocaleString("it")),$("#bonusAmount").text(i.generatedBonusAmount.toLocaleString("it")+" \u20ac"),$("#numbonusredeem").text(i.redeemedBonusCount.toLocaleString("it")),$("#today").text(moment().format("DD/MM/YYYY")),$("#cashbackActiveTotal").text((i.tot_aderenti+i.tot_aderenti_june).toLocaleString("it")),$("#carteOnboardTotal").text((i.tot_carteOnboard+i.tot_carteOnboard_june).toLocaleString("it")),$("#trxTotal").text((i.tot_trx_per_day+i.tot_trx_per_day_june).toLocaleString("it"));var p=document.getElementById("aderentiLine")?document.getElementById("aderentiLine").getContext("2d"):undefined,b=p?new Chart(p,{type:"bar",options:{responsive:!0,title:{display:!1,text:"Utenti cashback "},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7,unit:"day"}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},legend:{position:"bottom",labels:{boxWidth:8,usePointStyle:!0,fontFamily:"'Titillium Web', Arial"}},tooltips:{mode:"index",intersect:!1,callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined,y=document.getElementById("trxLine")?document.getElementById("trxLine").getContext("2d"):undefined,f=y?new Chart(y,{type:"line",options:{elements:{line:{tension:0}},responsive:!0,legend:{display:!1},title:{display:!1,text:"Transazioni "},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"},type:"time",time:{stepSize:7,unit:"day"}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{mode:"index",intersect:!1,callbacks:{title:tooltipTitleCallbackXDate,label:tooltipLabelCallbackYNumber}}}}):undefined,x=document.getElementById("userTrxThreshold")?document.getElementById("userTrxThreshold").getContext("2d"):undefined,g=x?new Chart(x,{type:"pie",options:{responsive:!0,legend:{position:"bottom",labels:{boxWidth:8,usePointStyle:!0,fontFamily:"'Titillium Web', Arial",fontColor:"#fff"}},tooltips:{mode:"nearest",intersect:!1,callbacks:{label:tooltipLabelCallbackArcNumber}},hover:{mode:"nearest",intersect:!1}}}):undefined,C=document.getElementById("trxAmountChart")?document.getElementById("trxAmountChart").getContext("2d"):undefined,k=C?new Chart(C,{type:"bar",options:{responsive:!0,legend:{display:!1},title:{display:!1,text:"Utenti per importo transazione"},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{mode:"index",intersect:!1,callbacks:{label:tooltipLabelCallbackYNumber}}}}):undefined,T=document.getElementById("userTrxChart")?document.getElementById("userTrxChart").getContext("2d"):undefined,_=T?new Chart(T,{type:"bar",options:{responsive:!0,legend:{display:!1},title:{display:!1,text:"Utenti cashback "},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontSize:15,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial"}}],yAxes:[{gridLines:{display:!0},ticks:{display:!0,fontSize:12,fontColor:"#5C6F82",fontFamily:"'Titillium Web', Arial",maxTicksLimit:5,callback:formatNumberSuffix}}]},tooltips:{mode:"index",intersect:!1,callbacks:{label:tooltipLabelCallbackYNumber}}}}):undefined,S={"#tot_carteOnboard":[i.tot_carteOnboard,i.tot_carteOnboard_june],"#tot_trx_per_day":[i.tot_trx_per_day,i.tot_trx_per_day_june],"#trx_1":[i.trx_1+i.trx_10,i.trx_1_june+i.trx_10_june]},L=[[g,generateUserTrxThreshold,[[i.trx_1,i.trx_10,TRX_THRESHOLDS[0]],[i.trx_1_june,i.trx_10_june,TRX_THRESHOLDS[1]]]],[b,generateAderenti,[[i.aderenti,i.carteOnboard],[i.aderenti_june,i.carteOnboard_june]]],[f,generateTrxDay,[[i.trx_per_day],[i.trx_per_day_june]]],[k,generateTrxAmount,[[i.all_range],[i.all_range_june]]],[_,generateUserTrx,[[i.user_by_trx_bin,TRX_THRESHOLDS[0]],[i.user_by_trx_bin_june,TRX_THRESHOLDS[1]]]]];t(CASHBACK_PERIOD_CUR),$("#cashbackPeriod1").click(function(){t(1)}),$("#cashbackPeriod2").click(function(){t(2)})});